// Loaded via --nfconfig
// workaround for pubmlst + HPC: remove `-e` so MLST probing failures don't abort the whole task
// Global: avoid "noexec" .command.sh issue by letting bash *read* scripts instead of exec'ing them
process {
  // Run scripts as "bash .command.sh" (no "-c"), which works on noexec mounts
  shell = ['/bin/bash']

  // MLST-specific overrides
  withName: 'BACTOPIA:MLST:MLST_MODULE' {
    // Keep -u and pipefail, drop -e
    shell = ['/bin/bash','-uo','pipefail']

    // Optional: if MLST sometimes exits non-zero during scheme probe
    // errorStrategy = 'retry'
    // maxRetries = 1
  }
}
