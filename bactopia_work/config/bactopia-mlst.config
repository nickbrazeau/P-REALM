// Loaded via --nfconfig
// workaround for pubmlst + HPC: remove `-e` so MLST probing failures don't abort the whole task
// written with help from chatGPT
process {

  // Default resources for “normal” steps
  cpus    = 8
  memory  = '64 GB'
  time    = '24h'
  scratch = true

  // Prevent noexec failures by reading scripts via bash
  shell = ['/bin/bash']

  withName: 'BACTOPIA:MLST:MLST_MODULE' {
    // Keep strict-ish flags but no '-e'
    shell = ['/bin/bash','-uo','pipefail']

    // Optional: be forgiving if MLST flaps on PubMLST/network/db
    errorStrategy = 'retry'
    maxRetries    = 2
  }
}

}
